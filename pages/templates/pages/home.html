{% extends 'pages/base.html' %}
{% load static %}

{% load custom_filters %}

{% block title %}Home - {{ block.super }}{% endblock %}

{% block header %}Welcome to Our E-commerce Store{% endblock %}

{% block content %}

<!-- Promo Slider -->
<div class="g-bg-gray-light-v5 g-pt-20">
    <div class="container">
        <div class="row align-items-center g-bg-white g-py-15">
            <div class="col-md-4 g-pl-30 g-mb-40 g-mb-0--md">
                <!-- Product Info -->
                <div class="text-center">
                    <div class="mb-4">
                        <h1 class="h2">{{ promo_product.name }}</h1>
                        <p>{{ promo_product.description }}</p>
                    </div>

                    <div class="mb-4">
                        <span class="g-color-primary g-font-weight-500 g-font-size-30 mr-2">${{ promo_product.price }}</span>
                    </div>
                </div>
                <!-- End Product Info -->

                <!-- Accordion -->
                <div id="promoAccordion" role="tablist" aria-multiselectable="true">
                    <div id="promoAccordionHeading" class="g-brd-y g-brd-gray-light-v3 py-3" role="tab">
                        <h5 class="g-font-weight-400 g-font-size-default mb-0">
                            <a class="d-block g-color-gray-dark-v5 g-text-underline--none--hover" href="#promoAccordionBody"
                               data-toggle="collapse" data-parent="#promoAccordion" aria-expanded="false" aria-controls="promoAccordionBody">Details
                                <span class="float-right g-pos-rel g-top-3 mr-1 fa fa-angle-down"></span></a>
                        </h5>
                    </div>
                    <div id="promoAccordionBody" class="collapse" role="tabpanel" aria-labelledby="promoAccordionHeading">
                        <div class="g-py-10">
                            {% with details=promo_product.details|linebreaks %}
                                <p class="g-font-size-12 mb-2">{{ details|safe }}</p>
                            {% endwith %}
                        </div>
                    </div>
                </div>
                <!-- End Accordion -->

                <!-- Colour -->
                <div class="d-flex justify-content-between align-items-center g-brd-bottom g-brd-gray-light-v3 py-3" role="tab">
                    <h5 class="g-color-gray-dark-v5 g-font-weight-400 g-font-size-default mb-0">Colour</h5>

                    <!-- Checkbox -->
                    {% for color in promo_product.colors.all %}
                        <label class="form-check-inline u-check mb-0 ml-auto g-mr-10">
                            <input class="g-hidden-xs-up g-pos-abs g-top-0 g-left-0" name="radInline1_1" type="radio">
                            <span class="d-block u-check-icon-checkbox-v4 g-brd-transparent g-brd-gray-dark-v4--checked rounded-circle">
                                <i class="d-block g-absolute-centered g-width-12 g-height-12 g-bg-{{ color.name }} rounded-circle"></i>
                            </span>
                        </label>
                    {% endfor %}
                    <!-- End Checkbox -->
                </div>
                <!-- End Colour -->


                <!-- Size -->
                <div class="d-flex justify-content-between align-items-center g-brd-bottom g-brd-gray-light-v3 py-3" role="tab">
                    <h5 class="g-color-gray-dark-v5 g-font-weight-400 g-font-size-default mb-0">Size</h5>

                    <!-- Checkbox -->
                    {% for size in promo_product.sizes|split_sizes %}
                        <label class="form-check-inline u-check mb-0 ml-auto g-mr-15">
                            <input class="g-hidden-xs-up g-pos-abs g-top-0 g-left-0" name="radInline2_1" type="radio">
                            <span class="d-block g-font-size-12 g-color-primary--checked">{{ size }}</span>
                        </label>
                    {% endfor %}
                    <!-- End Checkbox -->
                </div>
                <!-- End Size -->

                <!-- Quantity -->
                <div class="d-flex justify-content-between align-items-center g-brd-bottom g-brd-gray-light-v3 py-3 g-mb-30" role="tab">
                    <h5 class="g-color-gray-dark-v5 g-font-weight-400 g-font-size-default mb-0">Quantity</h5>

                    <div class="js-quantity input-group u-quantity-v1 g-width-80 g-brd-primary--focus">
                        <input class="js-result form-control text-center g-font-size-13 rounded-0" type="text" name="quantity" value="{{ promo_product.quantity }}" readonly>

                        <div class="input-group-addon d-flex align-items-center g-brd-gray-light-v2 g-width-30 g-bg-white g-font-size-13 rounded-0 g-pa-5">
                            <a href="javascript:void(0);" class="js-plus g-color-gray g-color-primary--hover fa fa-angle-up"></a>
                            <a href="javascript:void(0);" class="js-minus g-color-gray g-color-primary--hover fa fa-angle-down"></a>
                        </div>
                    </div>
                </div>
                <!-- End Quantity -->

                <!-- Buttons -->
                <div class="text-center">
                    <button class="btn u-btn-primary g-font-size-12 text-uppercase g-py-12 g-px-25" type="button">
                        Add to Cart <i class="align-middle ml-2 icon-finance-100 u-line-icon-pro"></i>
                    </button>
                </div>
                <!-- End Buttons -->
            </div>

            <div class="col-md-8">
                <!-- Promo Carousel Slider -->
                <div class="js-carousel"
                    data-infinite="true"
                    data-autoplay="true"
                    data-fade="true"
                    data-speed="7000"
                    data-lazy-load="ondemand"
                    data-pagi-classes="u-carousel-indicators-v1 g-pos-abs g-bottom-20 g-left-20">
                    {% for image in promo_product.images.all %}
                        <div class="js-slide">
                            <div class="g-bg-size-cover g-bg-pos-center g-min-height-600" data-bg-img-src="{{ image.image.url }}"></div>
                        </div>
                    {% endfor %}
                </div>
                <!-- End Promo Carousel Slider -->
            </div>
        </div>
    </div>
</div>
<!-- End Promo Slider -->

<!-- Featured Products Section -->
<div class="g-bg-gray-light-v5">
    <div class="container">
        <!-- Carousel Slider -->
        <div id="featuredProductsCarousel" class="js-carousel g-mx-minus-25"
                data-infinite="true"
                data-autoplay="false"
                data-slides-show="3"
                data-slides-scroll="1"
                data-center-mode="true"
                data-speed="8000">

            {% for product in featured_products %}
            <div class="js-slide g-px-10 g-py-20">
                <!-- Article -->
                <article class="media g-bg-white rounded g-pa-15">
                    <!-- Article Image -->
                    <div class="g-max-width-100 g-mr-15">
                        <img class="d-flex w-100" src="{{ product.images.first.image.url }}" alt="{{ product.name }}">
                    </div>
                    <!-- End Article Image -->

                    <!-- Article Info -->
                    <div class="media-body align-self-center">
                        <h4 class="h5 g-mb-7">
                            <a class="g-color-black g-color-primary--hover g-text-underline--none--hover" href="#">{{ product.name }}</a>
                        </h4>
                        <a class="d-inline-block g-color-gray-dark-v5 g-font-size-13 g-mb-10" href="#">{{ product.category.name }}</a>
                        <!-- End Article Info -->

                        <!-- Article Footer -->
                        <footer class="d-flex justify-content-between g-font-size-16">
                            <span class="g-color-black g-line-height-1">${{ product.price }}</span>
                            <ul class="list-inline g-color-gray-light-v2 g-font-size-14 g-line-height-1">
                                <li class="list-inline-item align-middle g-brd-right g-brd-gray-light-v3 g-pr-10 g-mr-6">
                                    <a class="g-color-gray-dark-v5 g-color-primary--hover g-text-underline--none--hover" href="#" title="Add to Cart"
                                        data-toggle="tooltip"
                                        data-placement="top">
                                        <i class="icon-finance-100 u-line-icon-pro"></i>
                                    </a>
                                </li>
                                <li class="list-inline-item align-middle">
                                    <a class="g-color-gray-dark-v5 g-color-primary--hover g-text-underline--none--hover" href="#" title="Add to Wishlist"
                                        data-toggle="tooltip"
                                        data-placement="top">
                                        <i class="icon-medical-022 u-line-icon-pro"></i>
                                    </a>
                                </li>
                            </ul>
                        </footer>
                        <!-- End Article Footer -->
                    </div>
                </article>
                <!-- End Article -->
            </div>
            {% endfor %}

        </div>
        <!-- End Carousel Slider -->
    </div>
</div>
<!-- End Featured Products Section -->


<!-- Collections -->
<div class="container g-pt-100 g-pb-70">
  <div class="row g-mx-minus-10">
    {% for collection in collections %}
      <div class="col-sm-6 col-md-4 g-px-10 g-mb-30">
        <article class="u-block-hover">
          <!-- Assuming you have an image field in the Collection model, update the source accordingly -->
          {% if collection.image %}
            <img class="w-100 u-block-hover__main--zoom-v1 g-mb-minus-8" src="{{ collection.image.url }}" alt="{{ collection.name }}">
          {% else %}
            <!-- Provide a default image or handle the case where there is no image -->
            <img class="w-100 u-block-hover__main--zoom-v1 g-mb-minus-8" src="{% static 'path/to/default/image.jpg' %}" alt="{{ collection.name }}">
          {% endif %}
          <div class="g-pos-abs g-bottom-30 g-left-30">
            <span class="d-block g-color-black">Collections</span>
            <h2 class="h1 mb-0">{{ collection.name }}</h2>
          </div>
          <a class="u-link-v2" href="{% url 'collection_detail' collection.id %}"></a>

        </article>
      </div>
    {% endfor %}
  </div>
</div>
<!-- End Collections -->


<!-- Products -->
<div class="container g-pb-100">
    <div class="text-center mx-auto g-max-width-600 g-mb-50">
        <h2 class="g-color-black mb-4">Featured Products</h2>
        <p class="lead">We want to create a range of beautiful, practical and modern outerwear that doesn't cost the earth – but lets you still live life in style.</p>
    </div>

    <div id="carouselCus1" class="js-carousel g-pb-100 g-mx-minus-10"
         data-infinite="true"
         data-slides-show="4"
         data-arrows-classes="u-arrow-v1 g-pos-abs g-bottom-0 g-width-45 g-height-45 g-color-gray-dark-v5 g-bg-secondary g-color-white--hover g-bg-primary--hover rounded"
         data-arrow-left-classes="fa fa-angle-left g-left-10"
         data-arrow-right-classes="fa fa-angle-right g-right-10"
         data-pagi-classes="u-carousel-indicators-v1 g-absolute-centered--x g-bottom-20 text-center">

        {% for product in featured_products %}
        <div class="js-slide">
            <div class="g-px-10">

                <!-- Product -->
                {% if product.images.first %}
                <figure class="g-pos-rel g-mb-20">
                    <img class="img-fluid" src="{{ product.images.first.image.url }}" alt="{{ product.name }}">
                    {% if product.discount_percentage %}
                    <span class="u-ribbon-v1 g-width-40 g-height-40 g-color-white g-bg-primary g-font-size-13 text-center text-uppercase g-rounded-50x g-top-10 g-right-minus-10 g-px-2 g-py-10">-{{ product.discount_percentage }}%</span>
                    {% endif %}
                    {% if product.is_new_arrival %}
                        <figcaption class="w-100 g-bg-primary g-bg-black--hover text-center g-pos-abs g-bottom-0 g-transition-0_2 g-py-5">
                            <a class="g-color-white g-font-size-11 text-uppercase g-letter-spacing-1 g-text-underline--none--hover" href="#">New Arrival</a>
                        </figcaption>
                    {% elif product.is_sold_out %}
                        <figcaption class="w-100 g-bg-lightred text-center g-pos-abs g-bottom-0 g-transition-0_2 g-py-5">
                            <span class="g-color-white g-font-size-11 text-uppercase g-letter-spacing-1">Sold Out</span>
                        </figcaption>
                    {% endif %}
                </figure>
                {% endif %}

                <div class="media">
                    <!-- Product Info -->
                    <div class="d-flex flex-column">
                        <h4 class="h6 g-color-black mb-1">
                            <a class="u-link-v5 g-color-black g-color-primary--hover" href="#">
                                {{ product.name }}
                            </a>
                        </h4>
                        <a class="d-inline-block g-color-gray-dark-v5 g-font-size-13" href="{% url 'category_detail' product.category.id %}">{{ product.category.name }}</a>
                        <span class="d-block g-color-black g-font-size-17">${{ product.price }}</span>
                    </div>
                    <!-- End Product Info -->

                    <!-- Products Icons -->
                    <ul class="list-inline media-body text-right">
                        <li class="list-inline-item align-middle mx-0">
                            <a class="u-icon-v1 u-icon-size--sm g-color-gray-dark-v5 g-color-primary--hover g-font-size-15 rounded-circle" href="javascript:void(0);" onclick="addToCart({{ product.id }})"
                               data-toggle="tooltip"
                               data-placement="top"
                               title="Add to Cart">
                                <i class="icon-finance-100 u-line-icon-pro"></i>
                            </a>
                        </li>
                        <li class="list-inline-item align-middle mx-0">
                            <a class="u-icon-v1 u-icon-size--sm g-color-gray-dark-v5 g-color-primary--hover g-font-size-15 rounded-circle" href="javascript:void(0);" onclick="addToWishlist({{ product.id }})"
                               data-toggle="tooltip"
                               data-placement="top"
                               title="Add to Wishlist">
                                <i class="icon-medical-022 u-line-icon-pro"></i>
                            </a>
                        </li>
                    </ul>
                    <!-- End Products Icons -->
                </div>
                <!-- End Product -->
            </div>
        </div>
        {% endfor %}
    </div>
</div>
<!-- End Products -->



{% comment %} <!-- Products -->
<div class="container g-pb-100">
    <div class="text-center mx-auto g-max-width-600 g-mb-50">
        <h2 class="g-color-black mb-4">Featured Products</h2>
        <p class="lead">We want to create a range of beautiful, practical and modern outerwear that doesn't cost the earth – but lets you still live life in style.</p>
    </div>

    <div id="carouselCus1" class="js-carousel g-pb-100 g-mx-minus-10"
         data-infinite="true"
         data-slides-show="4"
         data-arrows-classes="u-arrow-v1 g-pos-abs g-bottom-0 g-width-45 g-height-45 g-color-gray-dark-v5 g-bg-secondary g-color-white--hover g-bg-primary--hover rounded"
         data-arrow-left-classes="fa fa-angle-left g-left-10"
         data-arrow-right-classes="fa fa-angle-right g-right-10"
         data-pagi-classes="u-carousel-indicators-v1 g-absolute-centered--x g-bottom-20 text-center">

        {% for product in featured_products %}
        <div class="js-slide">
            <div class="g-px-10">

                <!-- Product -->
                {% if product.images.first %}
                <figure class="g-pos-rel g-mb-20">
                    <img class="img-fluid" src="{{ product.images.first.image.url }}" alt="{{ product.name }}">
                    {% if product.discount_percentage %}
                    <span class="u-ribbon-v1 g-width-40 g-height-40 g-color-white g-bg-primary g-font-size-13 text-center text-uppercase g-rounded-50x g-top-10 g-right-minus-10 g-px-2 g-py-10">-{{ product.discount_percentage }}%</span>
                    {% endif %}
                    {% if product.is_new_arrival %}
                        <figcaption class="w-100 g-bg-primary g-bg-black--hover text-center g-pos-abs g-bottom-0 g-transition-0_2 g-py-5">
                            <a class="g-color-white g-font-size-11 text-uppercase g-letter-spacing-1 g-text-underline--none--hover" href="#">New Arrival</a>
                        </figcaption>
                    {% elif product.is_sold_out %}
                        <figcaption class="w-100 g-bg-lightred text-center g-pos-abs g-bottom-0 g-transition-0_2 g-py-5">
                            <span class="g-color-white g-font-size-11 text-uppercase g-letter-spacing-1">Sold Out</span>
                        </figcaption>
                    {% endif %}
                </figure>
                {% endif %}

                <div class="media">
                    <!-- Product Info -->
                    <div class="d-flex flex-column">
                        <h4 class="h6 g-color-black mb-1">
                            <a class="u-link-v5 g-color-black g-color-primary--hover" href="#">
                                {{ product.name }}
                            </a>
                        </h4>
                        <a class="d-inline-block g-color-gray-dark-v5 g-font-size-13" href="{% url 'category_detail' product.category.id %}">{{ product.category.name }}</a>
                        <span class="d-block g-color-black g-font-size-17">${{ product.price }}</span>
                    </div>
                    <!-- End Product Info -->

                    <!-- Products Icons -->
                    <ul class="list-inline media-body text-right">
                        <li class="list-inline-item align-middle mx-0">
                            <a class="u-icon-v1 u-icon-size--sm g-color-gray-dark-v5 g-color-primary--hover g-font-size-15 rounded-circle" href="#"
                                data-toggle="tooltip"
                                data-placement="top"
                                title="Add to Cart">
                                <i class="icon-finance-100 u-line-icon-pro"></i>
                            </a>
                        </li>
                        <li class="list-inline-item align-middle mx-0">
                            <a class="u-icon-v1 u-icon-size--sm g-color-gray-dark-v5 g-color-primary--hover g-font-size-15 rounded-circle" href="#"
                                data-toggle="tooltip"
                                data-placement="top"
                                title="Add to Wishlist">
                                <i class="icon-medical-022 u-line-icon-pro"></i>
                            </a>
                        </li>
                    </ul>
                    <!-- End Products Icons -->
                </div>
                <!-- End Product -->
            </div>
        </div>
        {% endfor %}
    </div>
</div>
<!-- End Products --> {% endcomment %}



{% for category in categories %}
    {{ category.name }} <!-- Check if categories are being printed -->
{% endfor %}



{% endblock %}
